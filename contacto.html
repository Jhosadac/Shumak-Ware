<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contáctanos - Shumak Ware</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">

    <!--libreria de firebase-->
    <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-database.js"></script> 
</head>
<body>
    <!-- Header -->
    <header class="main-header">
        <div class="header-wrap">
            <div class="logo">
                <img src="assests/logo.png" alt="logo">
            </div>
            <nav class="nav-header">
                <ul class="main-menu">
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="#">Habitaciones</a></li>
                    <li><a href="restaurante.html">Restaurante</a></li>
                    <li><a href="servicios.html">Servicios</a></li>
                    <li><a href="contacto.html" class="active">Contacto</a></li>
                    <li><a href="reservas.html">Reservas</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Sección de Contacto -->
    <section class="contact-section">
        <div class="container">
            <h2>Contáctanos</h2>
            <div class="contact-container">
                <!-- Información de Contacto -->
                <div class="contact-info">
                    <h3 class="contact-title">Información de Contacto</h3>
                    
                    <div class="contact-details">
                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <div class="contact-text">
                                <h3>Dirección</h3>
                                <p>Calle Principal 123, Distrito de Anta<br>Huaraz, Ancash, Perú</p>
                            </div>
                        </div>
                        
                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-phone"></i>
                            </div>
                            <div class="contact-text">
                                <h3>Teléfono</h3>
                                <p>+51 987 957 231<br>+51 912 345 678</p>
                            </div>
                        </div>
                        
                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="contact-text">
                                <h3>Correo Electrónico</h3>
                                <p>shumak-ware@gmail.com<br>reservas@shumakware.com</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="opening-hours">
                        <h4 class="hours-title">Horario de Atención</h4>
                        <ul class="hours-list">
                            <li><span>Lunes - Viernes:</span> <span>9:00 AM - 10:00 PM</span></li>
                            <li><span>Sábados:</span> <span>8:00 AM - 11:00 PM</span></li>
                            <li><span>Domingos:</span> <span>8:00 AM - 9:00 PM</span></li>
                            <li><span>Feriados:</span> <span>10:00 AM - 8:00 PM</span></li>
                        </ul>
                    </div>
                </div>
                
                <!-- Mapa de Ubicación -->
                <div class="map-container">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d31551.370372441036!2d-77.53056517090257!3d-9.34822784042943!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x91a91a0c2a3b0bcd%3A0x2f9a0b7b4a5e4c4e!2sHuaraz%2C%20Peru!5e0!3m2!1sen!2sus!4v1691278609028!5m2!1sen!2sus" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>
            </div>
        </div>
    </section>

    <!-- Formulario de Contacto -->
    <section class="form-section">
        <div class="container">
            <div class="form-container">
                <h3 class="form-title">Envíanos un Mensaje</h3>
                <form id="contactForm">
                    <div class="form-row">
                        <div class="form-group-cont">
                            <label for="name">Nombre Completo</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        <div class="form-group-cont">
                            <label for="email">Correo Electrónico</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group-cont">
                            <label for="phone">Teléfono</label>
                            <input type="tel" id="phone" name="phone">
                        </div>
                        <div class="form-group-cont">
                            <label for="subject">Asunto</label>
                            <select id="subject" name="subject" required>
                                <option value="">Seleccione un asunto</option>
                                <option value="reserva">Reserva de Habitación</option>
                                <option value="evento">Reserva de Evento</option>
                                <option value="restaurante">Consulta de Restaurante</option>
                                <option value="general">Consulta General</option>
                                <option value="sugerencia">Sugerencia o Reclamo</option>
                                <option value="trabajo">Solicitud de Trabajo</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group-cont">
                        <label for="message">Mensaje</label>
                        <textarea id="message" name="message" placeholder="Escribe tu mensaje aquí..." required></textarea>
                    </div>
                    
                    <button type="submit" class="btn-submit">
                        <i class="fas fa-paper-plane"></i> Enviar Mensaje
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-grid">
                <div class="footer-section">
                    <h3>Acerca de Nosotros</h3>
                    <p>Shumak Ware es un hotel-restaurante campestre que combina la naturaleza con la comodidad</p>
                </div>
                <div class="footer-section">
                    <h3>Enlaces Rápidos</h3>
                    <ul>
                        <li><a href="index.html">Inicio</a></li>
                        <li><a href="habitaciones.html">Habitaciones</a></li>
                        <li><a href="restaurante.html">Restaurante</a></li>
                        <li><a href="servicios.html">Servicios</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Contacto</h3>
                    <ul>
                        <li><i class="fas fa-phone"></i> +51 912 345 678</li>
                        <li><i class="fas fa-envelope"></i> shumakware@gmail.com</li>
                        <li><i class="fas fa-map-marker-alt"></i> Anta, Huaraz, Ancash</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                &copy; 2023 Shumak Ware. Todos los derechos reservados.
            </div>
        </div>
    </footer>

    <script>
    const firebaseConfig = {
        apiKey: "AIzaSyApq_K7pJmtrLNZcewzxaVXWnVf4Sxynv4",
        authDomain: "shumak-ware.firebaseapp.com",
        databaseURL: "https://shumak-ware-default-rtdb.firebaseio.com",
        projectId: "shumak-ware",
        storageBucket: "shumak-ware.firebasestorage.app",
        messagingSenderId: "64196160181",
        appId: "1:64196160181:web:76852cef50c12a498e6cfc",
        measurementId: "G-8L85H7B12E"
    };

    // Inicializar Firebase
    firebase.initializeApp(firebaseConfig);

    // Referencia a la base de datos
    const contactFormDB = firebase.database().ref("contactForm");

    // Validación del formulario
    document.getElementById('contactForm').addEventListener('submit', function(e) {
        e.preventDefault();

        try {
            
            const nombre = document.getElementById('name').value;
            const correo = document.getElementById('email').value;
            const asunto = document.getElementById('subject').value;
            const mensaje = document.getElementById('message').value;
            
            // Campos obligatorios
            if (!nombre || !correo || !asunto || !mensaje) {
                alert('Por favor, complete todos los campos requeridos');
                return false;
            }
            
            // Validación de email básica
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailPattern.test(correo)) {
                alert('Por favor, ingrese una dirección de correo válida');
                return false;
            }

            // 1. Guardar en Firebase
        saveData(nombre, correo, asunto, mensaje);
        
        // 2. Enviar a WhatsApp
        sendWhatsAppMessage(nombre, correo, asunto, mensaje);
            
        } catch (error) {
            console.error('Error:', error);
            alert(`Error: ${error.message}`);
        }
    });

    // Función para enviar mensaje por WhatsApp
    function sendWhatsAppMessage(nombre, correo, asunto, mensaje) {
        // Número de la empresa (formato internacional sin espacios)
        const phoneNumber = "51990801570"; //
        
        // Crear mensaje formateado
        const text = `*Nuevo mensaje de contacto:*%0A%0A
*Nombre:* ${nombre}%0A
*Correo:* ${correo}%0A
*Asunto:* ${asunto}%0A
*Mensaje:*%0A${mensaje}`;
        
        // Crear enlace de WhatsApp
        const whatsappUrl = `https://wa.me/${phoneNumber}?text=${text}`;
        
        // Abrir en nueva pestaña
        window.open(whatsappUrl, '_blank');
    }

    // Función para guardar datos
    const saveData = (nombre, correo, asunto, mensaje) => {
        const codigoContacto = "CON" + Math.floor(1000000000 + Math.random() * 9000000000).toString();
        const newContact = contactFormDB.child(codigoContacto);
        
        // CORRECCIÓN: Guardar todos los campos incluyendo asunto
        newContact.set({
            nombre: nombre,
            correo: correo,  // Antes estaba 'email' que no existía
            asunto: asunto,  // Campo faltante
            mensaje: mensaje
        })
        .then(() => {
            console.log("Datos guardados correctamente");
            alert("¡Mensaje enviado con éxito!");
            
            // CORRECCIÓN: Usar el ID correcto (case-sensitive)
            document.getElementById("contactForm").reset();
        })
        .catch((error) => {
            console.error("Error al guardar:", error);
            alert("Ocurrió un error al enviar el mensaje");
        });
    };
    
    // Animación para los elementos de contacto (sin cambios)
    const contactItems = document.querySelectorAll('.contact-item');
    contactItems.forEach((item, index) => {
        item.style.opacity = '0';
        item.style.transform = 'translateY(20px)';
        item.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
        
        setTimeout(() => {
            item.style.opacity = '1';
            item.style.transform = 'translateY(0)';
        }, 300 + (index * 150));
    });
</script>
</body>
</html>
